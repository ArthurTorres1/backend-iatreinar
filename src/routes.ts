import {
  FastifyInstance,
  FastifyPluginOptions,
  FastifyRequest,
  FastifyReply,
} from "fastify";
import { CreateTrainController } from "./controllers/CreateTrainController";

export async function routes(
  fastify: FastifyInstance,
  options: FastifyPluginOptions
) {
  fastify.get("/", (request: FastifyRequest, reply: FastifyReply) => {
    let responseText =
      '```json\n{\n  "data": {\n    "nome": "Arthur",\n    "idade": 18,\n    "genero": "Masculino",\n    "altura": 1.85,\n    "peso": 85,\n    "objetivo": "Ganhar massa muscular",\n    "treinos": [\n      {\n        "dia": "Segunda-feira",\n        "exercicios": [\n          {"nome": "Supino Reto com Barra (Peito)", "series": 4, "repeticoes": "8-12"},\n          {"nome": "Supino Inclinado com Halteres (Peito)", "series": 3, "repeticoes": "10-12"},\n          {"nome": "Desenvolvimento Militar com Halteres (Ombros)", "series": 3, "repeticoes": "8-12"},\n          {"nome": "Elevação Lateral com Halteres (Ombros)", "series": 3, "repeticoes": "12-15"},\n          {"nome": "Tríceps Testa com Barra EZ (Tríceps)", "series": 3, "repeticoes": "10-12"},\n          {"nome": "Extensão de Tríceps na Polia com Corda (Tríceps)", "series": 3, "repeticoes": "12-15"}\n        ],\n        "dicas": "Foco no treino de Peito, Ombros (especialmente anterior e medial) e Tríceps. Concentre-se na contração muscular em cada repetição e controle o movimento tanto na fase concêntrica quanto excêntrica. Mantenha a forma correta para evitar lesões e maximizar o crescimento muscular."\n      },\n      {\n        "dia": "Terça-feira",\n        "exercicios": [\n          {"nome": "Puxada Frontal na Polia (Costas)", "series": 4, "repeticoes": "8-12"},\n          {"nome": "Remada Curvada com Barra (Costas)", "series": 3, "repeticoes": "8-12"},\n          {"nome": "Remada Unilateral com Halteres (Costas)", "series": 3, "repeticoes": "10-12 (cada lado)"},\n          {"nome": "Crucifixo Inverso / Fly Inverso na Máquina (Ombros Posteriores)", "series": 3, "repeticoes": "12-15"},\n          {"nome": "Rosca Direta com Barra (Bíceps)", "series": 3, "repeticoes": "10-12"},\n          {"nome": "Rosca Martelo com Halteres (Bíceps)", "series": 3, "repeticoes": "10-12"}\n        ],\n        "dicas": "Foco no treino de Costas, Ombros (principalmente posterior) e Bíceps. Sinta a escápula se movimentar nos exercícios de costas para uma contração completa. Não use o impulso excessivo, foque na conexão mente-músculo para o bíceps."\n      },\n      {\n        "dia": "Quarta-feira",\n        "exercicios": [\n          {"nome": "Agachamento Livre com Barra (Pernas)", "series": 4, "repeticoes": "8-12"},\n          {"nome": "Leg Press 45º (Pernas)", "series": 3, "repeticoes": "10-15"},\n          {"nome": "Cadeira Extensora (Quadríceps)", "series": 3, "repeticoes": "12-15"},\n          {"nome": "Mesa Flexora (Isquiotibiais)", "series": 3, "repeticoes": "12-15"},\n          {"nome": "Elevação de Panturrilha em Pé (Panturrilhas)", "series": 4, "repeticoes": "15-20"},\n          {"nome": "Prancha (Abdômen)", "series": 3, "repeticoes": "30-60 segundos"},\n          {"nome": "Abdominal Crunch (Abdômen)", "series": 3, "repeticoes": "15-20"}\n        ],\n        "dicas": "Foco no treino de Pernas, Panturrilhas e Abdômen. Aqueça bem as articulações dos joelhos e tornozelos antes de iniciar o treino de pernas. Mantenha o core ativado no agachamento e no leg press para estabilidade e proteção da coluna."\n      },\n      {\n        "dia": "Quinta-feira",\n        "exercicios": [\n          {"nome": "Caminhada Leve / Cardio de Baixa Intensidade", "series": 1, "repeticoes": "30-45 minutos"},\n          {"nome": "Alongamento e Mobilidade Geral", "series": 1, "repeticoes": "15-20 minutos"}\n        ],\n        "dicas": "Dia de Descanso Ativo ou Recuperação. Este dia é crucial para a recuperação muscular, redução de dores e prevenção de lesões. Se preferir, pode ser um descanso completo, mas um cardio leve e alongamento ajudam na circulação e aceleram a recuperação muscular."\n      },\n      {\n        "dia": "Sexta-feira",\n        "exercicios": [\n          {"nome": "Levantamento Terra (Corpo Inteiro)", "series": 3, "repeticoes": "6-10"},\n          {"nome": "Remada Baixa na Máquina (Costas)", "series": 3, "repeticoes": "10-12"},\n          {"nome": "Supino Inclinado com Halteres (Peito)", "series": 3, "repeticoes": "10-12"},\n          {"nome": "Desenvolvimento Militar com Halteres (Ombros)", "series": 3, "repeticoes": "8-12"},\n          {"nome": "Agachamento Búlgaro (Pernas)", "series": 3, "repeticoes": "10-12 (cada perna)"},\n          {"nome": "Abdominal Oblíquo (Prancha Lateral) (Abdômen)", "series": 3, "repeticoes": "30-45 segundos (cada lado)"}\n        ],\n        "dicas": "Dia de Corpo Inteiro, com foco em exercícios compostos e repetição de estímulo para os grandes grupos musculares. Concentre-se na técnica perfeita, especialmente no Levantamento Terra, antes de aumentar a carga. Aumente a ingestão de proteínas neste dia para suportar a recuperação."\n      },\n      {\n        "dia": "Sábado",\n        "exercicios": [],\n        "dicas": "Descanso Completo. Aproveite para relaxar e permitir que seus músculos se recuperem e cresçam. Alimente-se bem e hidrate-se, mesmo nos dias de descanso, pois a nutrição é fundamental para a recuperação e hipertrofia."\n      },\n      {\n        "dia": "Domingo",\n        "exercicios": [],\n        "dicas": "Descanso Completo. Priorize o sono de qualidade, visando 7 a 9 horas por noite. Uma boa noite de sono é tão importante quanto o treino e a dieta para o ganho de massa muscular, pois é durante o sono que ocorrem processos de reparo e crescimento."\n      }\n    ],\n    "dicas_gerais": [\n      "**Aquecimento:** Sempre faça 5-10 minutos de cardio leve (esteira, bicicleta) para aumentar a temperatura corporal e o fluxo sanguíneo, seguido de algumas séries de aquecimento com pesos leves para os primeiros exercícios do dia. Isso prepara seus músculos e articulações, prevenindo lesões.",\n      "**Superávit Calórico:** Para ganhar massa muscular, Arthur precisa consumir mais calorias do que gasta (superávit calórico). Foque em fontes de proteína magra (frango, carne vermelha, ovos, peixe), carboidratos complexos (arroz integral, batata doce, aveia, pão integral) e gorduras saudáveis (abacate, nozes, azeite).",\n      "**Ingestão de Proteína:** Incorpore uma fonte de proteína em cada refeição. Tente consumir cerca de 1.6 a 2.2 gramas de proteína por quilo de peso corporal por dia para otimizar a síntese proteica muscular.",\n      "**Hidratação:** Beba bastante água ao longo do dia, especialmente antes, durante e depois do treino. A hidratação adequada é vital para o desempenho e a recuperação.",\n      "**Sono de Qualidade:** Durma de 7 a 9 horas por noite. O crescimento muscular acontece principalmente durante o sono, quando o corpo libera hormônios importantes e repara os tecidos musculares.",\n      "**Progressão de Carga:** Para continuar crescendo, você precisa desafiar seus músculos constantemente. Tente aumentar o peso, as repetições ou o número de séries ao longo do tempo (princípio da sobrecarga progressiva). Registre seus treinos para acompanhar o progresso.",\n      "**Consistência e Paciência:** Os resultados no ganho de massa muscular vêm com a disciplina e a constância a longo prazo. Seja paciente e mantenha o plano, mesmo quando os resultados parecerem lentos.",\n      "**Escute seu Corpo:** Se sentir dor aguda ou incomum, pare o exercício e avalie a situação. O descanso é tão importante quanto o treino, e o excesso pode levar a lesões ou overtraining. A dor muscular tardia (DOMS) é normal, mas dor articular ou aguda não é.",\n      "**Variação (Opcional):** A cada 8-12 semanas, Arthur pode considerar mudar alguns exercícios, a ordem deles, ou o esquema de séries/repetições para evitar platôs e continuar desafiando os músculos de formas diferentes."\n    ]\n  }\n}\n```';
    try {
      let jsonString = responseText
        .replace(/```\w*\n/g, "")
        .replace(/\n```/g, "")
        .trim();
      let jsonData = JSON.parse(jsonString);
      return reply.send({ data: jsonData });
    } catch (err) {
      console.error("Error parsing JSON response:", err);
    }
  });

  fastify.post(
    "/create",
    async (request: FastifyRequest, reply: FastifyReply) => {
      return new CreateTrainController().handle(request, reply);
    }
  );
}
